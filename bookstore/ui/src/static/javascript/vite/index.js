(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();function ie(e,t){return{cena:e,count:t,deleted:!1,s(){return this.cena*this.count},ukupno(){return`Ukupno: ${this.s().toFixed(2)} din`},all(){return`Komada: ${this.count}`},del(s){s.classList.toggle("deleted_book"),this.sum-=this.s(),setTimeout(()=>{s.remove()},1700)},decr(s){this.count>1&&(this.count-=1,s.sum-=e)},incr(s){this.count+=1,s.sum+=e}}}function ce(){document.addEventListener("htmx:after-swap",e=>{var t;if(e.target instanceof HTMLElement){if(e.detail.pathInfo.requestPath=="/basket")return;if(e.detail.pathInfo.requestPath=="/komentarisanje/")return;if(e.detail.pathInfo.requestPath=="/ocenjivanje"){Alpine.store("all").modal.toggle(),(t=document.querySelector("#ratings"))==null||t.scrollIntoView();return}}else return;window.scrollTo(0,0)}),document.addEventListener("htmx:beforeSwap",e=>{e.detail.xhr.responseURL.includes("log-user")&&(e.detail.xhr.response.includes('id="logged"')?Alpine.store("all").modal.toggle():e.detail.shouldSwap=!1)}),document.addEventListener("htmx:afterRequest",e=>{e.detail.xhr.responseURL.includes("narucivanje")&&e.detail.successful&&(Alpine.store("all").basket.deleteAll(),Alpine.store("all").basket.toDelete=!0)}),document.addEventListener("htmx:beforeRequest",e=>{e.detail.requestConfig.path=="/basket"&&Alpine.store("all").basket.toDelete==!0&&e.detail.xhr.abort()})}function ae(e,t){const s=Object.create(null),r=e.split(",");for(let n=0;n<r.length;n++)s[r[n]]=!0;return t?n=>!!s[n.toLowerCase()]:n=>!!s[n]}const le=Object.prototype.hasOwnProperty,P=(e,t)=>le.call(e,t),g=Array.isArray,M=e=>J(e)==="[object Map]",ue=e=>typeof e=="string",q=e=>typeof e=="symbol",v=e=>e!==null&&typeof e=="object",fe=Object.prototype.toString,J=e=>fe.call(e),de=e=>J(e).slice(8,-1),N=e=>ue(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Q=(e,t)=>!Object.is(e,t),X=e=>{const t=new Set(e);return t.w=0,t.n=0,t},he=e=>(e.w&C)>0,pe=e=>(e.n&C)>0,K=new WeakMap;let C=1,R;const _=Symbol(""),j=Symbol("");let A=!0;const Z=[];function ge(){Z.push(A),A=!1}function me(){const e=Z.pop();A=e===void 0?!0:e}function l(e,t,s){if(A&&R){let r=K.get(e);r||K.set(e,r=new Map);let n=r.get(s);n||r.set(s,n=X()),_e(n)}}function _e(e,t){let s=!1;pe(e)||(e.n|=C,s=!he(e)),s&&(e.add(R),R.deps.push(e))}function m(e,t,s,r,n,o){const i=K.get(e);if(!i)return;let c=[];if(t==="clear")c=[...i.values()];else if(s==="length"&&g(e)){const u=Number(r);i.forEach((d,h)=>{(h==="length"||h>=u)&&c.push(d)})}else switch(s!==void 0&&c.push(i.get(s)),t){case"add":g(e)?N(s)&&c.push(i.get("length")):(c.push(i.get(_)),M(e)&&c.push(i.get(j)));break;case"delete":g(e)||(c.push(i.get(_)),M(e)&&c.push(i.get(j)));break;case"set":M(e)&&c.push(i.get(_));break}if(c.length===1)c[0]&&H(c[0]);else{const u=[];for(const d of c)d&&u.push(...d);H(X(u))}}function H(e,t){const s=g(e)?e:[...e];for(const r of s)r.computed&&V(r);for(const r of s)r.computed||V(r)}function V(e,t){(e!==R||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const we=ae("__proto__,__v_isRef,__isVue"),k=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(q)),be=ee(),Ee=ee(!0),F=Ie();function Ie(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...s){const r=a(this);for(let o=0,i=this.length;o<i;o++)l(r,"get",o+"");const n=r[t](...s);return n===-1||n===!1?r[t](...s.map(a)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...s){ge();const r=a(this)[t].apply(this,s);return me(),r}}),e}function Se(e){const t=a(this);return l(t,"has",e),t.hasOwnProperty(e)}function ee(e=!1,t=!1){return function(r,n,o){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&o===(e?t?ze:se:t?Ce:ne).get(r))return r;const i=g(r);if(!e){if(i&&P(F,n))return Reflect.get(F,n,o);if(n==="hasOwnProperty")return Se}const c=Reflect.get(r,n,o);return(q(n)?k.has(n):we(n))||(e||l(r,"get",n),t)?c:w(c)?i&&N(n)?c:c.value:v(c)?e?re(c):D(c):c}}const Te=Oe();function Oe(e=!1){return function(s,r,n,o){let i=s[r];if(y(i)&&w(i)&&!w(n))return!1;if(!e&&(!$e(n)&&!y(n)&&(i=a(i),n=a(n)),!g(s)&&w(i)&&!w(n)))return i.value=n,!0;const c=g(s)&&N(r)?Number(r)<s.length:P(s,r),u=Reflect.set(s,r,n,o);return s===a(o)&&(c?Q(n,i)&&m(s,"set",r,n):m(s,"add",r,n)),u}}function Me(e,t){const s=P(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&s&&m(e,"delete",t,void 0),r}function Re(e,t){const s=Reflect.has(e,t);return(!q(t)||!k.has(t))&&l(e,"has",t),s}function Ae(e){return l(e,"iterate",g(e)?"length":_),Reflect.ownKeys(e)}const Pe={get:be,set:Te,deleteProperty:Me,has:Re,ownKeys:Ae},ve={get:Ee,set(e,t){return!0},deleteProperty(e,t){return!0}},z=e=>e,x=e=>Reflect.getPrototypeOf(e);function E(e,t,s=!1,r=!1){e=e.__v_raw;const n=a(e),o=a(t);s||(t!==o&&l(n,"get",t),l(n,"get",o));const{has:i}=x(n),c=r?z:s?$:W;if(i.call(n,t))return c(e.get(t));if(i.call(n,o))return c(e.get(o));e!==n&&e.get(t)}function I(e,t=!1){const s=this.__v_raw,r=a(s),n=a(e);return t||(e!==n&&l(r,"has",e),l(r,"has",n)),e===n?s.has(e):s.has(e)||s.has(n)}function S(e,t=!1){return e=e.__v_raw,!t&&l(a(e),"iterate",_),Reflect.get(e,"size",e)}function G(e){e=a(e);const t=a(this);return x(t).has.call(t,e)||(t.add(e),m(t,"add",e,e)),this}function U(e,t){t=a(t);const s=a(this),{has:r,get:n}=x(s);let o=r.call(s,e);o||(e=a(e),o=r.call(s,e));const i=n.call(s,e);return s.set(e,t),o?Q(t,i)&&m(s,"set",e,t):m(s,"add",e,t),this}function Y(e){const t=a(this),{has:s,get:r}=x(t);let n=s.call(t,e);n||(e=a(e),n=s.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return n&&m(t,"delete",e,void 0),o}function B(){const e=a(this),t=e.size!==0,s=e.clear();return t&&m(e,"clear",void 0,void 0),s}function T(e,t){return function(r,n){const o=this,i=o.__v_raw,c=a(i),u=t?z:e?$:W;return!e&&l(c,"iterate",_),i.forEach((d,h)=>r.call(n,u(d),u(h),o))}}function O(e,t,s){return function(...r){const n=this.__v_raw,o=a(n),i=M(o),c=e==="entries"||e===Symbol.iterator&&i,u=e==="keys"&&i,d=n[e](...r),h=s?z:t?$:W;return!t&&l(o,"iterate",u?j:_),{next(){const{value:b,done:L}=d.next();return L?{value:b,done:L}:{value:c?[h(b[0]),h(b[1])]:h(b),done:L}},[Symbol.iterator](){return this}}}}function p(e){return function(...t){return e==="delete"?!1:this}}function xe(){const e={get(o){return E(this,o)},get size(){return S(this)},has:I,add:G,set:U,delete:Y,clear:B,forEach:T(!1,!1)},t={get(o){return E(this,o,!1,!0)},get size(){return S(this)},has:I,add:G,set:U,delete:Y,clear:B,forEach:T(!1,!0)},s={get(o){return E(this,o,!0)},get size(){return S(this,!0)},has(o){return I.call(this,o,!0)},add:p("add"),set:p("set"),delete:p("delete"),clear:p("clear"),forEach:T(!0,!1)},r={get(o){return E(this,o,!0,!0)},get size(){return S(this,!0)},has(o){return I.call(this,o,!0)},add:p("add"),set:p("set"),delete:p("delete"),clear:p("clear"),forEach:T(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=O(o,!1,!1),s[o]=O(o,!0,!1),t[o]=O(o,!1,!0),r[o]=O(o,!0,!0)}),[e,s,t,r]}const[Le,Ke,je,ye]=xe();function te(e,t){const s=t?e?ye:je:e?Ke:Le;return(r,n,o)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(P(s,n)&&n in r?s:r,n,o)}const qe={get:te(!1,!1)},Ne={get:te(!0,!1)},ne=new WeakMap,Ce=new WeakMap,se=new WeakMap,ze=new WeakMap;function De(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function We(e){return e.__v_skip||!Object.isExtensible(e)?0:De(de(e))}function D(e){return y(e)?e:oe(e,!1,Pe,qe,ne)}function re(e){return oe(e,!0,ve,Ne,se)}function oe(e,t,s,r,n){if(!v(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=n.get(e);if(o)return o;const i=We(e);if(i===0)return e;const c=new Proxy(e,i===2?r:s);return n.set(e,c),c}function y(e){return!!(e&&e.__v_isReadonly)}function $e(e){return!!(e&&e.__v_isShallow)}function a(e){const t=e&&e.__v_raw;return t?a(t):e}const W=e=>v(e)?D(e):e,$=e=>v(e)?re(e):e;function w(e){return!!(e&&e.__v_isRef===!0)}const He={selected:"login",isLogged:!1,username:"",password:"",setSelected(e){f().user.selected=e},setLogged(e){f().user.isLogged=e},reset(){f().user.setLogged(!1),f().user.username="",f().user.password="",f().user.selected="login",setTimeout(()=>{document.querySelector("#home").click()},500)}},Ve={items:[],toDelete:!1,deleteAll(){const e=document.querySelectorAll(".del-btn");let t=e.length,s=0;e.forEach(r=>{setTimeout(()=>{s+=1,r.click(),s==t&&(Alpine.store("all").basket.toDelete=!1,Alpine.store("all").modal.current="server",setTimeout(()=>{Alpine.store("all").modal.toggle()},1e3))},500)})}},Fe={visible:!1,current:"",setCurrent(e){f().modal.current=e},toggle(){f().modal.visible=!f().modal.visible,f().modal.visible||this.setCurrent("")},close(){this.setCurrent(""),f().modal.visible=!1}},Ge={rating:0};function f(){return Alpine.store("all")}function Ue(){const e={user:He,modal:Fe,basket:Ve,ratings:Ge};window.basketData=ie,document.addEventListener("alpine:init",()=>{Alpine.store("all",D(e))})}Ue();ce();
